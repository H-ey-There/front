{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/min/Desktop/Heythere/heythere-client/src/pages/login.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nexport default function Login() {\n  _s();\n\n  var _useState = useState(\"\"),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  function submitHandler() {\n    return _submitHandler.apply(this, arguments);\n  }\n\n  function _submitHandler() {\n    _submitHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var payload;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              payload = {\n                email: email,\n                password: password\n              };\n              _context2.next = 3;\n              return axios.post(\"http://localhost:8080/auth/login\", payload).then( /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n                  var status, data, res, id, accessToken, tokenType;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          status = response.status, data = response.data;\n                          res = data;\n\n                          if (!(status === 200 && data)) {\n                            _context.next = 8;\n                            break;\n                          }\n\n                          id = res.id, accessToken = res.accessToken, tokenType = res.tokenType;\n                          localStorage.setItem(\"token\", \"\".concat(tokenType, \" \").concat(accessToken));\n                          localStorage.setItem(\"id\", \"\".concat(id));\n                          _context.next = 8;\n                          return axios.get(\"http://localhost:8080/user/me\", {\n                            headers: {\n                              \"Authorization\": \"\".concat(localStorage.get(\"token\"))\n                            }\n                          }).then(function (response) {\n                            var data = response.data;\n                            var userInfo = data;\n                            console.log(userInfo);\n                            localStorage.setItem(\"userInfo\", JSON.stringify(data));\n                            window.location.href = \"http://localhost:3000\";\n                          })[\"catch\"](function (err) {\n                            return console.error(err);\n                          });\n\n                        case 8:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref.apply(this, arguments);\n                };\n              }());\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _submitHandler.apply(this, arguments);\n  }\n\n  return __jsx(\"div\", {\n    className: \"main-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"login-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, \"Heythere!\"), __jsx(\"input\", {\n    type: \"email\",\n    placeholder: \"email\",\n    className: \"box1 border1\",\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }), __jsx(\"input\", {\n    type: \"password\",\n    placeholder: \"password\",\n    className: \"box1 border2\",\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }), __jsx(\"input\", {\n    type: \"submit\",\n    className: \"send\",\n    value: \"Go\",\n    onClick: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: \"message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, \"Join Today \", __jsx(\"a\", {\n    href: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 31\n    }\n  }, \"click here\"))), __jsx(\"style\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, \"\\n*{\\n    margin: 0;\\n    padding: 0;\\n    border: 0;\\n    text-decoration: none;\\n  outline:none;\\n}\\nbody,a{\\n    font-family: calibri;\\n    font-size: 14px;\\n    font-weight: normal;\\n    color: #3B424D;\\n    \\n}\\n.main-wrap{\\n    background: #FF5335;\\n    width: 100%;\\n    height: 100%;\\n    position: absolute;\\n}\\n.login-main{\\n    width: 300px;\\n    height: 158px;\\n    position: absolute;\\n    margin: auto;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n    background:#fcb1ac;\\n    padding: 10px;\\n    border-radius: 10px;\\n}\\n\\n.login-main p {\\n    text-indent:10px;\\n}\\n\\n.box1{\\n    background: lighten(#FF5335, 30%);\\n    height: 40px;\\n    text-indent: 10px;\\n    width: 90%;\\n    margin-bottom: 2px;\\n    color: #FF5335;\\n    font-size: 15px;\\n    font-weight: 400;\\n}\\n.border1{\\n    border-radius: 5px 5px 0 0;\\n}\\n.border2{\\n    border-radius: 0px 0 5px 5px;\\n}\\n\\n.send{\\n\\n    width:  60px;\\n    height: 60px;\\n    border-radius: 50%;\\n    position: absolute;\\n    right: 9px;\\n    top: 20px;\\n    border: 5px solid lighten(#FF5335, 10%);\\n    background: #FF5335;\\n    font-size: 18px;\\n    color: #fff;\\n    font-weight: normal;\\n    text-shadow: 1px 1px 2px #000;\\n    box-sizing: border-box;\\n    -webkit-box-sizing: border-box;\\n    \\n}\\n\\n.send:hover {\\n    animation: spin 0.3s ease-in-out;\\n    -webkit-animation: spin 0.3s ease-in-out;\\n    -moz-animation: spin 0.3s ease-in-out;\\n    -ms-animation: spin 0.3s ease-in-out;\\n    -o-animation: spin 0.3s ease-in-out;\\n    cursor: pointer;\\n}\\n\\n\\n@keyframes spin{\\n    from{\\n        transform: rotate(0deg);\\n    }\\n    to{\\n        transform: rotate(360deg);\\n    }\\n}\\n@-webkit-keyframes spin{\\n    from{\\n        -webkit-transform: rotate(0deg);\\n    }\\n    to{\\n        -webkit-transform: rotate(360deg);\\n    }\\n}\\n@-moz-keyframes spin{\\n    from{\\n        -moz-transform: rotate(0deg);\\n    }\\n    to{\\n        -moz-transform: rotate(360deg);\\n    }\\n}\\n@-o-keyframes spin{\\n    from{\\n        -o-transform: rotate(0deg);\\n    }\\n    to{\\n        -o-transform: rotate(360deg);\\n    }\\n}\\n\\n\\n            \"));\n}\n\n_s(Login, \"3B3pqDcVnkT+z/sPK6Z9zQsLP+s=\");\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/min/Desktop/Heythere/heythere-client/src/pages/login.tsx"],"names":["React","useState","axios","Login","email","setEmail","password","setPassword","submitHandler","payload","post","then","response","status","data","res","id","accessToken","tokenType","localStorage","setItem","get","headers","userInfo","console","log","JSON","stringify","window","location","href","err","error","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport axios from \"axios\";\n\ninterface LoginFormRequestDto {\n    email: string;\n    password: string;\n}\n\ninterface AuthResponse {\n    id: number;\n    accessToken: string;\n    tokenType: string;\n}\n\ninterface UserResponse {\n    id: number;\n    email: string;\n    name: string;\n    img?: string;\n}\n\nexport default function Login() {\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    async function submitHandler() {\n        const payload: LoginFormRequestDto = {email, password};\n\n        await axios.post(\"http://localhost:8080/auth/login\", payload)\n            .then(async response => {\n                const {status, data} = response;\n                const res: AuthResponse = data;\n\n                if (status === 200 && data) {\n                    const {id, accessToken, tokenType} = res;\n                    localStorage.setItem(\"token\", `${tokenType} ${accessToken}`);\n                    localStorage.setItem(\"id\", `${id}`);\n                    await axios.get(\"http://localhost:8080/user/me\", {\n                        headers: {\n                            \"Authorization\": `${localStorage.get(\"token\")}`\n                        }\n                    })\n                        .then(response => {\n                            const {data} = response;\n                            const userInfo:UserResponse = data;\n                            console.log(userInfo);\n                            localStorage.setItem(\"userInfo\", JSON.stringify(data));\n                            window.location.href = \"http://localhost:3000\";\n                        })\n                        .catch(err => console.error(err))\n                }\n            })\n            // .catch(err => {\n            //     console.error(err);\n            //     window.alert(\"유저정보가 올바르지 않습니다!\");\n            //     setEmail(\"\");\n            //     setPassword(\"\");\n            // })\n    }\n\n    return (\n        <div className=\"main-wrap\">\n            <div className=\"login-main\">\n                <h1>Heythere!</h1>\n                <input type=\"email\" placeholder=\"email\" className=\"box1 border1\"\n                       onChange={(e) => setEmail(e.target.value)}/>\n                <input type=\"password\" placeholder=\"password\" className=\"box1 border2\"\n                       onChange={e => setPassword(e.target.value)}/>\n                <input type=\"submit\" className=\"send\" value=\"Go\" onClick={submitHandler}/>\n                <div className=\"message\"></div>\n                <p>Join Today <a href=\"/register\">click here</a></p>\n            </div>\n            <style>{`\n*{\n    margin: 0;\n    padding: 0;\n    border: 0;\n    text-decoration: none;\n  outline:none;\n}\nbody,a{\n    font-family: calibri;\n    font-size: 14px;\n    font-weight: normal;\n    color: #3B424D;\n    \n}\n.main-wrap{\n    background: #FF5335;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n}\n.login-main{\n    width: 300px;\n    height: 158px;\n    position: absolute;\n    margin: auto;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background:#fcb1ac;\n    padding: 10px;\n    border-radius: 10px;\n}\n\n.login-main p {\n    text-indent:10px;\n}\n\n.box1{\n    background: lighten(#FF5335, 30%);\n    height: 40px;\n    text-indent: 10px;\n    width: 90%;\n    margin-bottom: 2px;\n    color: #FF5335;\n    font-size: 15px;\n    font-weight: 400;\n}\n.border1{\n    border-radius: 5px 5px 0 0;\n}\n.border2{\n    border-radius: 0px 0 5px 5px;\n}\n\n.send{\n\n    width:  60px;\n    height: 60px;\n    border-radius: 50%;\n    position: absolute;\n    right: 9px;\n    top: 20px;\n    border: 5px solid lighten(#FF5335, 10%);\n    background: #FF5335;\n    font-size: 18px;\n    color: #fff;\n    font-weight: normal;\n    text-shadow: 1px 1px 2px #000;\n    box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    \n}\n\n.send:hover {\n    animation: spin 0.3s ease-in-out;\n    -webkit-animation: spin 0.3s ease-in-out;\n    -moz-animation: spin 0.3s ease-in-out;\n    -ms-animation: spin 0.3s ease-in-out;\n    -o-animation: spin 0.3s ease-in-out;\n    cursor: pointer;\n}\n\n\n@keyframes spin{\n    from{\n        transform: rotate(0deg);\n    }\n    to{\n        transform: rotate(360deg);\n    }\n}\n@-webkit-keyframes spin{\n    from{\n        -webkit-transform: rotate(0deg);\n    }\n    to{\n        -webkit-transform: rotate(360deg);\n    }\n}\n@-moz-keyframes spin{\n    from{\n        -moz-transform: rotate(0deg);\n    }\n    to{\n        -moz-transform: rotate(360deg);\n    }\n}\n@-o-keyframes spin{\n    from{\n        -o-transform: rotate(0deg);\n    }\n    to{\n        -o-transform: rotate(360deg);\n    }\n}\n\n\n            `}</style>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}